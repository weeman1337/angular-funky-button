angular.module("angular-funky-button",[]),angular.module("angular-funky-button").provider("funkyButton",function(){var s=this;this.dismissConfirm=5e3,this.dismissSuccess=2500,this.dismissError=2500,this.classes={},this.$get=[function(){return{options:{dismissConfirm:s.dismissConfirm,dismissSuccess:s.dismissSuccess,dismissError:s.dismissError,classes:s.classes}}}]}),angular.module("angular-funky-button").directive("funkyButton",["FunkyButtonLinker",function(s){return{priority:1,restrict:"A",scope:{funkyButton:"=funkyButton",fubuClick:"&fubuClick"},transclude:!0,link:s,controller:"FunkyButtonController"}}]),angular.module("angular-funky-button").controller("FunkyButtonController",["$scope","$element","funkyButton","FunkyButtonStateHelper","$timeout","$log",function(s,e,u,t,o,r){function n(){if(s.options.hasSuccessElement===!0){s.fubuStateHelper.setSuccess();var e=s.options.dismissSuccess;"function"==typeof e&&(e=e(s.$parent)),e===!1?S=s.$watch(function(){return s.options.dismissSuccess(s.$parent)},function(e){e===!0&&(S(),s.fubuStateHelper.setDefault())}):e===!0?s.fubuStateHelper.setDefault():0===e||(w=o(function(){s.fubuStateHelper.setDefault()},s.options.dismissSuccess))}else s.fubuStateHelper.setDefault()}function i(){if(s.options.hasErrorElement===!0){s.fubuStateHelper.setError();var e=s.options.dismissError;"function"==typeof e&&(e=e(s.$parent)),e===!1?y=s.$watch(function(){return s.options.dismissError(s.$parent)},function(e){e===!0&&(y(),s.fubuStateHelper.setDefault())}):e===!0?s.fubuStateHelper.setDefault():0===e||(w=o(function(){s.fubuStateHelper.setDefault()},s.options.dismissError))}else s.fubuStateHelper.setDefault()}function a(){s.options.hasConfirmElement===!0?f():l()}function f(){s.fubuStateHelper.setConfirm(),0!==s.options.dismissConfirm&&s.options.dismissConfirm!==!1&&(v=o(function(){s.fubuStateHelper.setDefault()},s.options.dismissConfirm))}function l(){m()}function c(){void 0!==v&&o.cancel(v),m()}function m(){s.fubuStateHelper.setWorking();var e=s.fubuClick();if(e===!1)i();else if(e===!0)n();else{if(void 0===e.then||"function"!=typeof e.then)throw new Error("fubu-click function must return true, false or a promise");e.then(n,i)}}function b(){void 0!==g&&o.cancel(g),s.fubuStateHelper.setDefault()}function d(){if(void 0!==s.options.dismissError&&"function"==typeof s.options.dismissError){var e=s.options.dismissError(s.$parent);e!==!1&&b()}else s.options.dismissError!==!1&&b()}function p(){void 0!==w&&o.cancel(w),s.fubuStateHelper.setDefault()}function C(){if(void 0!==s.options.dismissSuccess&&"function"==typeof s.options.dismissSuccess){var e=s.options.dismissSuccess(s.$parent);e!==!1&&p()}else s.options.dismissSuccess!==!1&&p()}function h(){}function k(){switch(r.debug("fubu → onClick()"),s.fubu.state){case"default":a();break;case"confirm":c();break;case"error":d();break;case"success":C();break;case"working":h()}}r.debug("fubu → controller"),s.options=angular.copy(u.options),s.fubu={},void 0!==s.funkyButton&&(s.funkyButton=s.fubu),s.fubu.dismissError=function(){void 0!==g&&o.cancel(g),s.fubuStateHelper.setDefault()},s.fubu.dismissSuccess=function(){void 0!==w&&o.cancel(w),s.fubuStateHelper.setDefault()},s.fubu.click=function(){k()},s.showDefault=!1,s.showConfirm=!1,s.showWorking=!1,s.showSuccess=!1,s.showError=!1,s.fubu.state="default";var v,w,g;s.fubuStateHelper=new t(s,e,s.options);var S,y;s.rawClickHandler=function(){s.$apply(function(){k()})}}]),angular.module("angular-funky-button").factory("FunkyButtonLinker",["$compile","funkyButton","FunkyButtonOptionsHelper","$parse","$log",function(s,e,u,t,o){function r(s){return s.charAt(0).toUpperCase()+s.slice(1)}function n(e,u,o,n){var i=angular.element("<"+o.nodeName+"></"+o.nodeName+">");i.attr("ng-show","show"+r(n)+" === true"),s(i)(e),e.options["has"+r(n)+"Element"]=!0,o.hasAttribute("fubu-dismiss")===!0&&(e.options["dismiss"+r(n)]=t(o.getAttribute("fubu-dismiss")),o.removeAttribute("fubu-dismiss")),o.hasAttribute("fubu-class")===!0&&(e.options.classes[n]=o.getAttribute("fubu-class"),e.options["has"+r(n)+"Element"]=!0,o.removeAttribute("fubu-class")),o.removeAttribute("fubu-"+n),i.append(o),u.append(i)}return function(s,t,r,i,a){o.debug("FunkyButtonLinker"),t.addClass("funky-button"),a(function(e){angular.forEach(e,function(e){1===e.nodeType&&(e.hasAttribute("fubu-default")===!0?n(s,t,e,"default"):e.hasAttribute("fubu-confirm")===!0?n(s,t,e,"confirm"):e.hasAttribute("fubu-working")===!0?n(s,t,e,"working"):e.hasAttribute("fubu-success")===!0?n(s,t,e,"success"):e.hasAttribute("fubu-error")===!0&&n(s,t,e,"error"))})}),s.options=u.mergeOptions(e.options,s.options),s.fubuStateHelper.setDefault(),t.bind("click",s.rawClickHandler)}}]),angular.module("angular-funky-button").factory("FunkyButtonStateHelper",[function(){function s(s,e,u){this.setDefault=function(){e[0].blur(),s.fubu.state="default",e.removeClass(u.classes.confirm),e.removeClass("fubu-confirm"),e.removeClass(u.classes.working),e.removeClass("fubu-working"),e.removeClass(u.classes.success),e.removeClass("fubu-success"),e.removeClass(u.classes.error),e.removeClass("fubu-error"),e.addClass(u.classes["default"]),e.addClass("fubu-default"),s.showDefault=!0,s.showConfirm=!1,s.showWorking=!1,s.showSuccess=!1,s.showError=!1},this.setConfirm=function(){e[0].blur(),s.fubu.state="confirm",e.removeClass(u.classes["default"]),e.removeClass("fubu-default"),e.removeClass(u.classes.working),e.removeClass("fubu-working"),e.removeClass(u.classes.success),e.removeClass("fubu-success"),e.removeClass(u.classes.error),e.removeClass("fubu-error"),e.addClass(u.classes.confirm),e.addClass("fubu-confirm"),s.showDefault=!1,s.showConfirm=!0,s.showWorking=!1,s.showSuccess=!1,s.showError=!1},this.setWorking=function(){e[0].blur(),s.fubu.state="working",e.removeClass(u.classes["default"]),e.removeClass("fubu-default"),e.removeClass(u.classes.confirm),e.removeClass("fubu-confirm"),e.removeClass(u.classes.success),e.removeClass("fubu-success"),e.removeClass(u.classes.error),e.removeClass("fubu-error"),e.addClass(u.classes.working),e.addClass("fubu-working"),s.showDefault=!1,s.showConfirm=!1,s.showWorking=!0,s.showSuccess=!1,s.showError=!1},this.setSuccess=function(){e[0].blur(),s.fubu.state="success",e.removeClass(u.classes["default"]),e.removeClass("fubu-default"),e.removeClass(u.classes.confirm),e.removeClass("fubu-confirm"),e.removeClass(u.classes.working),e.removeClass("fubu-working"),e.removeClass(u.classes.error),e.removeClass("fubu-error"),e.addClass(u.classes.success),e.addClass("fubu-success"),s.showDefault=!1,s.showConfirm=!1,s.showWorking=!1,s.showSuccess=!0,s.showError=!1},this.setError=function(){e[0].blur(),s.fubu.state="error",e.removeClass(u.classes["default"]),e.removeClass("fubu-default"),e.removeClass(u.classes.confirm),e.removeClass("fubu-confirm"),e.removeClass(u.classes.working),e.removeClass("fubu-working"),e.removeClass(u.classes.success),e.removeClass("fubu-success"),e.addClass(u.classes.error),e.addClass("fubu-error"),s.showDefault=!1,s.showConfirm=!1,s.showWorking=!1,s.showSuccess=!1,s.showError=!0}}return s}]),angular.module("angular-funky-button").factory("FunkyButtonOptionsHelper",function(){return{mergeOptions:function(s,e){var u=this,t=angular.copy(s);return"object"==typeof e&&angular.forEach(e,function(e,o){t[o]="object"==typeof o?u.mergeOptions(s[o],o):e}),t}}});
//# sourceMappingURL=angular-funky-button.min.js.map